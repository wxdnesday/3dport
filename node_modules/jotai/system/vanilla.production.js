System.register([],function(A){"use strict";return{execute:function(){A("atom",R);let N=0;function R(s,l){const h=`atom${++N}`,f={toString:()=>h};return typeof s=="function"?f.read=s:(f.init=s,f.read=E=>E(f),f.write=(E,z,w)=>z(f,typeof w=="function"?w(E(f)):w)),l&&(f.write=l),f}const C=s=>"init"in s,q=s=>!!s.write,y=new WeakMap,T=(s,l)=>{y.set(s,l),s.catch(()=>{}).finally(()=>y.delete(s))},B=(s,l)=>{const h=y.get(s);h&&(y.delete(s),h(l))},F=(s,l)=>{s.status="fulfilled",s.value=l},G=(s,l)=>{s.status="rejected",s.reason=l},U=s=>typeof(s==null?void 0:s.then)=="function",M=(s,l)=>"v"in s&&"v"in l&&Object.is(s.v,l.v),H=(s,l)=>"e"in s&&"e"in l&&Object.is(s.e,l.e),p=s=>"v"in s&&s.v instanceof Promise,V=(s,l)=>"v"in s&&"v"in l&&s.v.orig&&s.v.orig===l.v.orig,S=s=>{if("e"in s)throw s.e;return s.v},_=A("createStore",()=>{const s=new WeakMap,l=new WeakMap,h=new Map,f=t=>s.get(t),E=(t,n)=>{const r=s.get(t);if(s.set(t,n),h.has(t)||h.set(t,r),r&&p(r)){const e="v"in n?n.v instanceof Promise?n.v:Promise.resolve(n.v):Promise.reject(n.e);B(r.v,e)}},z=(t,n,r)=>{const e=new Map;let i=!1;r.forEach((o,d)=>{!o&&d===t&&(o=n),o&&(e.set(d,o),n.d.get(d)!==o&&(i=!0))}),(i||n.d.size!==e.size)&&(n.d=e)},w=(t,n,r)=>{const e=f(t),i={d:(e==null?void 0:e.d)||new Map,v:n};if(r&&z(t,i,r),e&&M(e,i)&&e.d===i.d)return e;if(e&&p(e)&&p(i)&&V(e,i)){if(e.d===i.d)return e;i.v=e.v}return E(t,i),i},I=(t,n,r,e)=>{if(U(n)){let i;const o=new Promise((d,a)=>{let g=!1;n.then(u=>{if(!g){g=!0;const c=f(t),v=w(t,o,r);F(o,u),d(u),l.has(t)&&(c==null?void 0:c.d)!==v.d&&D(t,v,c==null?void 0:c.d)}},u=>{if(!g){g=!0;const c=f(t),v=w(t,o,r);G(o,u),a(u),l.has(t)&&(c==null?void 0:c.d)!==v.d&&D(t,v,c==null?void 0:c.d)}}),i=u=>{g||(g=!0,u.then(c=>F(o,c),c=>G(o,c)),d(u))}});return o.orig=n,o.status="pending",T(o,d=>{d&&i(d),e==null||e()}),w(t,o,r)}return w(t,n,r)},$=(t,n,r)=>{const e=f(t),i={d:(e==null?void 0:e.d)||new Map,e:n};return r&&z(t,i,r),e&&H(e,i)&&e.d===i.d?e:(E(t,i),i)},m=(t,n)=>{const r=f(t);if(!n&&r&&(l.has(t)||Array.from(r.d).every(([u,c])=>u===t||m(u)===c)))return r;const e=new Map;let i=!0;const o=u=>{if(u===t){const v=f(u);if(v)return e.set(u,v),S(v);if(C(u))return e.set(u,void 0),u.init;throw new Error("no atom init")}const c=m(u);return e.set(u,c),S(c)};let d,a;const g={get signal(){return d||(d=new AbortController),d.signal},get setSelf(){return!a&&q(t)&&(a=(...u)=>{if(!i)return P(t,...u)}),a}};try{const u=t.read(o,g);return I(t,u,e,()=>d==null?void 0:d.abort())}catch(u){return $(t,u,e)}finally{i=!1}},x=t=>S(m(t)),K=t=>{let n=l.get(t);return n||(n=j(t)),n},k=(t,n)=>!n.l.size&&(!n.t.size||n.t.size===1&&n.t.has(t)),Q=t=>{const n=l.get(t);n&&k(t,n)&&W(t)},J=t=>{if(!t.size)return;const n=new Map,r=new WeakMap,e=o=>{const d=l.get(o);d==null||d.t.forEach(a=>{a!==o&&(n.set(a,(n.get(a)||new Set).add(o)),r.set(a,(r.get(a)||0)+1),e(a))})};t.forEach(e);const i=o=>{const d=l.get(o);d==null||d.t.forEach(a=>{var g;if(a!==o){let u=r.get(a);if(u&&r.set(a,--u),!u){let c=!!((g=n.get(a))!=null&&g.size);if(c){const v=f(a),X=m(a,!0);c=!v||!M(v,X)}c||n.forEach(v=>v.delete(a))}i(a)}})};t.forEach(i),t.clear()},L=(t,n,...r)=>{let e=!0;const i=a=>S(m(a)),o=(a,...g)=>{let u;if(a===n){if(!C(a))throw new Error("atom not writable");const c=f(a),v=I(a,g[0]);(!c||!M(c,v))&&t.add(a)}else u=L(t,a,...g);return e||(J(t),O()),u},d=n.write(i,o,...r);return e=!1,d},P=(t,...n)=>{const r=new Set,e=L(r,t,...n);return J(r),O(),e},j=(t,n)=>{var r;(r=f(t))==null||r.d.forEach((i,o)=>{const d=l.get(o);d?d.t.add(t):o!==t&&j(o,t)}),m(t);const e={t:new Set(n&&[n]),l:new Set};if(l.set(t,e),q(t)&&t.onMount){const i=t.onMount((...o)=>P(t,...o));i&&(e.u=i)}return e},W=t=>{var n;const r=(n=l.get(t))==null?void 0:n.u;r&&r(),l.delete(t);const e=f(t);e&&(p(e)&&B(e.v),e.d.forEach((i,o)=>{if(o!==t){const d=l.get(o);d&&(d.t.delete(t),k(o,d)&&W(o))}}))},D=(t,n,r)=>{const e=new Set(n.d.keys());r==null||r.forEach((i,o)=>{if(e.has(o)){e.delete(o);return}const d=l.get(o);d&&(d.t.delete(t),k(o,d)&&W(o))}),e.forEach(i=>{const o=l.get(i);o?o.t.add(t):l.has(t)&&j(i,t)})},O=()=>{for(;h.size;){const t=Array.from(h);h.clear(),t.forEach(([n,r])=>{const e=f(n);if(e){const i=l.get(n);i&&e.d!==(r==null?void 0:r.d)&&D(n,e,r==null?void 0:r.d),i&&!(r&&!p(r)&&(M(r,e)||H(r,e)))&&i.l.forEach(o=>o())}})}};return{get:x,set:P,sub:(t,n)=>{const r=K(t);O();const e=r.l;return e.add(n),()=>{e.delete(n),Q(t)}}}});let b;const Y=A("getDefaultStore",()=>(b||(b=_()),b))}}});
